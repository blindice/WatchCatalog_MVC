@{
    ViewData["Title"] = "Index";
}


<div style="width: 100vw">
    <section id="hero" style="height: 100vh; width: 100vw; background-image: url(../images/wallpaer.png)">
        <div style="display: flex; justify-content: center; align-items: center; width: 100%; height: 100%; gap:10vw;">
            <div id="slogan-container" style="width: 40vw; position: relative">
                <p style="font-weight: 700; font-size: 8vh; text-align:start">When <span style="color: #0d6efd">Time</span> and <span style="color: #0d6efd">Beauty</span> Collides</p>
                <p style="text-align:justify; font-size:2vh">
                    Here at <span style="font-weight: 700">Clockwork</span>, we just dont give and priorities <span style="font-weight: 700">Quality</span>, because that's already <span style="font-weight: 700">given</span> to our products
                    <img src="~/images/fire.gif" style="height: 2.5vh; margin-left: -.5vw; transform: translateY(-.5vh)" />. We give our consumers a whole new <span style="font-weight: 700">Exprerience</span> and <span style=" font-weight: 700">Unrivaled Satisfaction</span> that will remove all your watch trust issues.
                    @*                     <img src="~/images/thumbsup.gif" style="z-index: -1; bottom: -2.3vh; left: 0vw" /> *@
                </p>
                <div style="display: flex; align-items: center; column-gap: 2vw">
                    <button class="btn btn-primary btn-lg shadow-sm">See watches</button>
                    <p style="margin-top: 1.5vh; font-weight: 700; font-size: 1.5vh"><span style="color: #0d6efd">1000+</span> visits everyday!</p>
                </div>
            </div>
            <div id="image-container" style="display: flex; flex-direction: column; gap: 1vw">
                <div style="display: flex; gap: 1vw">
                    <img class="shadow" src="~/images/watch3.jpg" style="height: 25vh; border-top-left-radius: 15%" />
                    <img class="shadow" src="~/images/watch1.jpg" style="height: 25vh; border-top-right-radius: 15%" />
                </div>
                <div style="display: flex; gap: 1vw">
                    <img class="shadow" src="~/images/HD-wallpaper-ulysses-nardin-blue-clock-clocks-fossil-luxury-rotary-watch-watches-zenith-thumbnail.jpg" style="height: 25vh; border-bottom-left-radius: 15%" />
                    <img class="shadow" src="~/images/pexels-fernando-arcos-190819.jpg" style="height: 25vh;" />
                    <img class="shadow" src="~/images/watch2.jpg" style="height: 25vh; border-top-right-radius: 15%" />
                </div>
                <div style="display: flex; gap: 1vw; justify-content: end">
                    <img class="shadow" src="~/images/watch5.jpg" style="height: 25vh; border-bottom-left-radius: 15%" />
                    <img class="shadow" src="~/images/wrist-watch-clock-time-indicating-time-of.jpg" style="height: 25vh; border-bottom-right-radius: 15%" />
                </div>
            </div>
            @* <img src="~/images/scroll.gif" style="position: absolute; top: 85vh; height: 15vh" /> *@
            <video autoplay loop muted playsinline src="~/videos/scrollvid.mp4" style="position: absolute; top: 88vh; height: 15vh; z-index: -1"></video>
        </div>
    </section>
    <section id="bullet" style="width: 100%; background: #0d6efd; display: flex; color: white; justify-content:space-around; padding: 1.5vw 3vw ">
        <div style="display: flex; flex-direction: column; width: 20vw">
            <div style="display: flex"><img src="~/images/quality-icon.png" style="height: 4vh;" /><p style="font-size: 2.5vh; font-weight: 500">Strap</p></div>
            <p style="text-align:justify;font-size: 1.5vh">
                Our Straps are made with quality materials depends on the type. Leather straps are made with high quality cow or crocodile hide.
                Rubber straps are made with double shot abs for extra elasticity. And for Metal straps we used combinations of carbon fiber with aluminum to make it lightweight.
            </p>
        </div>
        <div style="display: flex; flex-direction: column; width: 20vw">
            <div style="display: flex"><img src="~/images/quality-icon.png" style="height: 4vh;" /><p style="font-size: 2.5vh; font-weight: 500">Jewel</p></div>
            <p style="text-align:justify;font-size: 1.5vh">Our Jewels are from and hand-carfted by our trusted gemologist, who works everyday on the fields, mountains, riverbeds and forests together with world-renowed jewelers. Jewels will then be sent to our QA for more quality assurance.</p>
        </div>
        <div style="display: flex; flex-direction: column; width: 20vw">
            <div style="display: flex"><img src="~/images/quality-icon.png" style="height: 4vh;" /><p style="font-size: 2.5vh; font-weight: 500">Case</p></div>
            <p style="text-align:justify;font-size: 1.5vh">Our Cases are made according to the consumers request. We can make it with carbon fiber to be lightweight mixed with choice or metals, and well, if they don't want the extra light, we can opt to use pure metal materials.</p>
        </div>
    </section>
    <section id="propositions" style="width: 100%; background: #0d6efd; border-top: 2px white solid; display: flex; flex-direction: column; color: white; padding: 3vw 3vw">
        <div style="display:flex; justify-content: center">
            <div style="width: 50vw;">
                <p style="font-size: 2.5vh; font-weight: 500">IP68 Rating</p>
            </div>
            <img class="shadow-sm" src="~/images/ip68.jpg" style="border-radius: 2vw; width: 50vw" />
        </div>
        <div style="display:flex;justify-content: center">
            <img class="shadow-sm" src="~/images/ip68.jpg" style="border-radius: 2vw; width: 50vw" />
            <div style="width: 50vw;">
                <p style="font-size: 2.5vh; font-weight: 500">IP68 Rating</p>
            </div>
        </div>
    </section>
    <section id="carousel" style="width: 100%;  height: 35vh; background: #0d6efd; border-top: 2px white solid">
    </section>
    <section id="watches" style="width: 100%; height: 100vh">
        <div style="display: flex; flex-direction: column; justify-content: center; align-items: center; width: 100%; height: 100%; gap:2vw;">
            <button id="btnAdd" class="btn btn-primary">Create Watch</button>
            <div id="watchesContainer" style="display: flex; gap: 20px; flex-wrap: wrap;">
            </div>
            <div id="pagination-container">
                <ul class="pagination pagination-sm">
                </ul>
            </div>
        </div>
    </section>
    <partial name="_Modal" />
</div>

@section Scripts{
    <script>
        $(async () => {
            //getting all watches
            let getAllWatches = async (pageNumber = 1) => {
                await $.ajax({
                    url: `@Url.Action("getwatches")?PageNumber=${pageNumber}`,
                    method: "GET",
                    beforeSend: () => {
                        $("#watchesContainer").empty()
                        $("#watchesContainer").html("Loading...")
                    },
                    success: (res) => {
                        //create watches cards
                        $("#watchesContainer").empty()
                        $.each(res.watchDTOs, (key, value) => {
                            let createCard = (value) => {
                                let cardBody = $("<div>").addClass("card").css("width", "10vw").css("height", "25vh").css("position", "relative").css("overflow", "hidden")
                                let image = $(`<img src='${value.image}' />`).css("height", "25vh").css("position", "absolute").css("margin", "auto")
                                cardBody.click(() => {
                                    window.location.href = `@Url.Action("Details")/${value.watchId}`
                                })

                                return cardBody.append(image)
                            }
                            $("#watchesContainer").append(createCard(value))

                        })

                        //create pagination
                        $(".pagination").empty()
                        let firstPagination = $("<li>").addClass(`page-item ${res.hasPrevious ? '' : 'disabled'}`).wrapInner(`<button class='page-link'>First</button>`)

                        if (res.hasPrevious) firstPagination.click(async () => await getAllWatches(1))

                        let lastPagination = $("<li>").addClass(`page-item ${res.hasNext && res.currentPage != res.totalPage ? '' : 'disabled'}`)
                            .wrapInner(`<button class='page-link'>Last</button>`)

                        if (res.hasNext && res.currentPage != res.totalPage) lastPagination.click(async () => await getAllWatches(res.totalPages))

                        let paginationButtons = []

                        for (let i = res.currentPage - 2; i <= res.currentPage + 2; i++) {
                            let pageButton;
                            if (i > 0 && i <= res.totalPages)
                                pageButton = $("<li>").addClass("page-item").wrapInner($("<button>").addClass("page-link").text(i).click(async () => await getAllWatches(i)))

                            if (i === res.currentPage)
                                pageButton.addClass("active").children().off()

                            paginationButtons.push(pageButton)
                        }

                        $(".pagination").append(firstPagination, paginationButtons, lastPagination)
                    },
                    error: (xhr, ajaxOptions, thrownError) => {
                        console.log(xhr)
                        window.location = `/error?statusCode=${xhr.status}&message=${xhr.responseText}`;
                    }
                })
            }

            await getAllWatches();

            //add
            $("#btnAdd").click(() => callModalBody({ url: '@Url.Action("ModalBody")', method: "POST", id: null, submitFn: formSubmit }))

            var formSubmit = async (event) => {
                event.preventDefault()
                var form = new FormData();
                form.append("image", imageFile.files[0]);
                form.append("watchname", $("#WatchName").val());
                form.append("case", $("#Case").val());
                form.append("jewel", $("#Jewel").val());
                form.append("strap", $("#Strap").val());
                form.append("caliber", $("#Caliber").val());
                form.append("full_description", $("#Full_Description").val());
                form.append("short_description", $("#Short_description").val());
                form.append("Chronograph", $("#Chronograph").val());
                form.append("price", $("#Price").val());
                form.append("height", $("#Height").val());
                form.append("weight", $("#Weight").val());
                form.append("diameter", $("#Diameter").val());
                form.append("thickness", $("#Thickness").val());

                await $.ajax({
                    url: "/addwatch",
                    method: "POST",
                    timeout: 0,
                    processData: false,
                    mimeType: "multipart/form-data",
                    contentType: false,
                    data: form,
                    success: () => {
                        getAllWatches()
                    },
                    error: (err) => {
                        console.log(err)
                    }
                })
            }
        })
    </script>
}

